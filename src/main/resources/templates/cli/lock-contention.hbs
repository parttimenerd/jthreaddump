{{!-- Lock contention analysis result template --}}
{{#bold "═══════════════════════════════════════════════════════════════════════════════" color=colorEnabled}}{{/bold}}
{{#bold "                          LOCK CONTENTION ANALYSIS" color=colorEnabled}}{{/bold}}
{{#bold "═══════════════════════════════════════════════════════════════════════════════" color=colorEnabled}}{{/bold}}

Severity: {{#severityColor severity color=colorEnabled}}{{severity}}{{/severityColor}}

{{!-- Summary --}}
{{#bold "Summary:" color=colorEnabled}}{{/bold}}
  Contended Locks: {{totalContentedLocks}}
  Hot Locks (5+ waiters): {{hotLocks}}
  Max Waiters on Single Lock: {{maxWaiters}}

{{#if hasContention}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}
{{#bold "Lock Contention Details:" color=colorEnabled}}{{/bold}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}

{{#each contentions}}
{{#cyan "Lock:" color=../colorEnabled}}{{/cyan}} {{lockId}} ({{lockClassName}})
  {{#if hasOwner}}Owner: {{#bold owner.name color=../colorEnabled}}{{/bold}} ({{#threadStateColor owner.state color=../colorEnabled}}{{/threadStateColor}}){{else}}Owner: {{#dim "unknown" color=../colorEnabled}}{{/dim}}{{/if}}
  Waiters: {{#ifGte waiterCount 5}}{{#error waiterCount color=../colorEnabled}}{{/error}}{{else}}{{#ifGte waiterCount 2}}{{#warning waiterCount color=../colorEnabled}}{{/warning}}{{else}}{{waiterCount}}{{/ifGte}}{{/ifGte}} thread(s)
{{#each waiters}}
    • {{name}} ({{#threadStateColor state color=../../colorEnabled}}{{/threadStateColor}})
{{/each}}
{{#if hasMoreWaiters}}
    ... and {{moreWaiterCount}} more waiters
{{/if}}

{{/each}}
{{#if hasMoreContentions}}
... and {{moreContentionCount}} more contended locks
{{/if}}
{{else}}
{{#success "✓ No significant lock contention detected" color=colorEnabled}}{{/success}}
{{/if}}

{{#if hasJfrData}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}
{{#bold "JFR Lock Analysis:" color=colorEnabled}}{{/bold}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}

  Total Lock Events: {{jfrAnalysis.totalEvents}}
  Unique Locks: {{jfrAnalysis.uniqueLocks}}
  Total Blocked Time: {{formatDuration jfrAnalysis.totalBlockedMs}}
{{/if}}

{{!-- Findings --}}
{{#if hasFindings}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}
{{#bold "Findings:" color=colorEnabled}}{{/bold}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}

{{#each findings}}
{{#severityColor severity color=../colorEnabled}}[{{severity}}]{{/severityColor}} {{message}}
{{/each}}
{{/if}}

{{#bold "═══════════════════════════════════════════════════════════════════════════════" color=colorEnabled}}{{/bold}}