{{!-- JNI analysis result template --}}
{{#bold "═══════════════════════════════════════════════════════════════════════════════" color=colorEnabled}}{{/bold}}
{{#bold "                               JNI ANALYSIS" color=colorEnabled}}{{/bold}}
{{#bold "═══════════════════════════════════════════════════════════════════════════════" color=colorEnabled}}{{/bold}}

Severity: {{#severityColor severity color=colorEnabled}}{{severity}}{{/severityColor}}
{{#if isMultiDump}}Dumps Analyzed: {{snapshotCount}}{{/if}}

{{!-- Summary --}}
{{#bold "Summary:" color=colorEnabled}}{{/bold}}
  Native Method Threads: {{#ifGt maxNativeThreads 20}}{{#warning maxNativeThreads color=colorEnabled}}{{/warning}}{{else}}{{maxNativeThreads}}{{/ifGt}}
  Max Global Refs:       {{#if globalRefsGrowing}}{{#warning maxGlobalRefs color=colorEnabled}}{{/warning}}{{else}}{{maxGlobalRefs}}{{/if}}
  Max Weak Refs:         {{maxWeakRefs}}

{{#if globalRefsGrowing}}
{{#warning "⚠ JNI GLOBAL REFS GROWING - Possible native memory leak" color=colorEnabled}}{{/warning}}
{{/if}}

{{#if stuckNativeThreads}}
{{#warning "⚠ THREADS STUCK IN NATIVE CODE" color=colorEnabled}}{{/warning}}
{{/if}}

{{#if isMultiDump}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}
{{#bold "Per-Dump JNI Statistics:" color=colorEnabled}}{{/bold}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}

  Dump  | Native Threads | Global Refs | Weak Refs
  ------+----------------+-------------+----------
{{#each snapshots}}
  {{pad dumpIndex width=5}}| {{pad nativeMethodThreads width=14}} | {{pad globalRefs width=11}} | {{weakRefs}}
{{/each}}
{{/if}}

{{#if hasNativeThreads}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}
{{#bold "Threads in Native Code:" color=colorEnabled}}{{/bold}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}

{{#each nativeThreads}}
  {{#cyan name color=../colorEnabled}}{{/cyan}} ({{state}})
    Native ID: {{nativeId}}
    Method: {{topNativeMethod}}
{{/each}}
{{#if hasMoreNativeThreads}}
  ... and {{moreNativeThreadCount}} more
{{/if}}
{{/if}}

{{!-- Findings --}}
{{#if hasFindings}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}
{{#bold "Findings:" color=colorEnabled}}{{/bold}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}

{{#each findings}}
{{#severityColor severity color=../colorEnabled}}[{{severity}}]{{/severityColor}} {{message}}
{{/each}}
{{/if}}

{{#unless hasIssues}}
{{#success "✓ No JNI issues detected" color=colorEnabled}}{{/success}}
{{/unless}}

{{#bold "═══════════════════════════════════════════════════════════════════════════════" color=colorEnabled}}{{/bold}}