{{!-- JIT Compiler analysis result template --}}
{{#bold "═══════════════════════════════════════════════════════════════════════════════" color=colorEnabled}}{{/bold}}
{{#bold "                           JIT COMPILER ANALYSIS" color=colorEnabled}}{{/bold}}
{{#bold "═══════════════════════════════════════════════════════════════════════════════" color=colorEnabled}}{{/bold}}

Severity: {{#severityColor severity color=colorEnabled}}{{severity}}{{/severityColor}}
{{#if isMultiDump}}Analysis Type: Multi-Dump Temporal{{/if}}

{{#if hasData}}
{{!-- Summary --}}
{{#bold "Summary:" color=colorEnabled}}{{/bold}}
  Compiler Threads:   {{compilerThreadCount}}
  Active Compilers:   {{#ifGt activeCompilerThreads 0}}{{#info activeCompilerThreads color=colorEnabled}}{{/info}}{{else}}{{activeCompilerThreads}}{{/ifGt}}
{{#if hasC1Activity}}
    C1 Active:        {{#cyan activeC1Threads color=colorEnabled}}{{/cyan}}
{{/if}}
{{#if hasC2Activity}}
    C2 Active:        {{#blue activeC2Threads color=colorEnabled}}{{/blue}}
{{/if}}
{{#if hasJfrData}}
  Total Compilations: {{#ifGt totalCompilations 100}}{{#warning totalCompilations color=colorEnabled}}{{/warning}}{{else}}{{totalCompilations}}{{/ifGt}}
  Deoptimizations:    {{#ifGt totalDeoptimizations 50}}{{#error totalDeoptimizations color=colorEnabled}}{{/error}}{{else}}{{totalDeoptimizations}}{{/ifGt}}
{{/if}}

{{#if hasTemporal}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}
{{#bold "COMPILER ACTIVITY TRENDS:" color=colorEnabled}}{{/bold}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}

{{#if compilationTrend}}
Compilation Trend: {{#if compilationTrend.isIncreasing}}{{#warning compilationTrend.direction color=colorEnabled}}{{/warning}} {{#warning "↑" color=colorEnabled}}{{/warning}}{{else}}{{#if compilationTrend.isDecreasing}}{{#success compilationTrend.direction color=colorEnabled}}{{/success}} {{#success "↓" color=colorEnabled}}{{/success}}{{else}}{{compilationTrend.direction}} →{{/if}}{{/if}} ({{compilationTrend.changeRate}}%)
{{/if}}

{{#if deoptTrend}}
Deoptimization Trend: {{#if deoptTrend.isIncreasing}}{{#error deoptTrend.direction color=colorEnabled}}{{/error}} {{#error "↑" color=colorEnabled}}{{/error}}{{else}}{{#if deoptTrend.isDecreasing}}{{#success deoptTrend.direction color=colorEnabled}}{{/success}} {{#success "↓" color=colorEnabled}}{{/success}}{{else}}{{deoptTrend.direction}} →{{/if}}{{/if}} ({{deoptTrend.changeRate}}%)
{{/if}}

{{#if activeThreadsTrend}}
Active Threads Trend: {{activeThreadsTrend.direction}} ({{activeThreadsTrend.changeRate}}%)
{{/if}}

Per-Dump Activity:
{{#each dumpLabels}}
  Dump {{this}}: {{#if ../compilationsPerDump}}{{../compilationsPerDump.[addOne @index]}} compilations{{/if}}{{#if ../deoptsPerDump}}, {{../deoptsPerDump.[addOne @index]}} deopts{{/if}}{{#if ../activeThreadsPerDump}}, {{../activeThreadsPerDump.[addOne @index]}} active{{/if}}
{{/each}}

{{/if}}

{{#if hasCompilerThreads}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}
{{#bold "Compiler Threads:" color=colorEnabled}}{{/bold}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}

{{#each compilerThreads}}
  {{#if isActive}}{{#info "●" color=../colorEnabled}}{{/info}}{{else}}○{{/if}} {{#if (contains name "C1")}}{{#cyan "[C1]" color=../colorEnabled}}{{/cyan}}{{else}}{{#if (contains name "C2")}}{{#blue "[C2]" color=../colorEnabled}}{{/blue}}{{else}}[JIT]{{/if}}{{/if}} {{name}} - {{state}}
{{/each}}
{{/if}}

{{#if hasCompilations}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}
{{#bold "Top Compilations:" color=colorEnabled}}{{/bold}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}

{{#each topCompilations}}
  {{level}} {{method}} ({{formatDuration durationMs}}) {{#if success}}{{#success "✓" color=../colorEnabled}}{{/success}}{{else}}{{#error "✗" color=../colorEnabled}}{{/error}}{{/if}}
{{/each}}
{{/if}}

{{#if hasDeopts}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}
{{#bold "Deoptimizations:" color=colorEnabled}}{{/bold}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}

{{#each topDeoptimizations}}
  {{#warning "⚠" color=../colorEnabled}}{{/warning}} {{method}}
     Reason: {{reason}}
     Action: {{action}}
{{/each}}
{{/if}}

{{else}}
{{#dim "No compiler activity detected" color=colorEnabled}}{{/dim}}
{{#unless hasJfrData}}
{{#dim "Note: JFR data not available. Detailed compilation analysis requires JFR file." color=colorEnabled}}{{/dim}}
{{/unless}}
{{/if}}

{{!-- Findings --}}
{{#if hasFindings}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}
{{#bold "Findings:" color=colorEnabled}}{{/bold}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}

{{#each findings}}
{{#severityColor severity color=../colorEnabled}}[{{severity}}]{{/severityColor}} {{message}}
{{/each}}
{{/if}}

{{#bold "═══════════════════════════════════════════════════════════════════════════════" color=colorEnabled}}{{/bold}}