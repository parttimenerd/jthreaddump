{{!-- Thread churn analysis result template --}}
{{#bold "═══════════════════════════════════════════════════════════════════════════════" color=colorEnabled}}{{/bold}}
{{#bold "                           THREAD CHURN ANALYSIS" color=colorEnabled}}{{/bold}}
{{#bold "═══════════════════════════════════════════════════════════════════════════════" color=colorEnabled}}{{/bold}}

Severity: {{#severityColor severity color=colorEnabled}}{{severity}}{{/severityColor}}
{{#if isMultiDump}}Dumps Analyzed: {{dumpCount}}{{/if}}

{{!-- Summary --}}
{{#bold "Summary:" color=colorEnabled}}{{/bold}}
  First Dump Count:   {{firstCount}} threads
  Last Dump Count:    {{lastCount}} threads
  Net Change:         {{#if potentialLeak}}{{#error netGrowth color=colorEnabled}}{{/error}}{{else}}{{#ifGt netGrowth 0}}{{#warning netGrowth color=colorEnabled}}{{/warning}}{{else}}{{netGrowth}}{{/ifGt}}{{/if}} thread(s)
  Total Created:      {{#success totalCreated color=colorEnabled}}{{/success}}
  Total Destroyed:    {{totalDestroyed}}
  Churn Rate:         {{churnRate}}x

{{#if potentialLeak}}
{{#error "⚠ POTENTIAL THREAD LEAK DETECTED" color=colorEnabled}}{{/error}}
Thread count has grown consistently, which may indicate a thread leak.
{{/if}}

{{#if highChurn}}
{{#warning "⚠ HIGH THREAD CHURN" color=colorEnabled}}{{/warning}}
Many threads are being created and destroyed, which may impact performance.
{{/if}}

{{#if hasChurnEvents}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}
{{#bold "Churn Events:" color=colorEnabled}}{{/bold}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}

{{#each churnEvents}}
  Dump {{fromDump}} → Dump {{toDump}}: {{#success "+" color=../colorEnabled}}{{created}}{{/success}} created, {{#error "-" color=../colorEnabled}}{{destroyed}}{{/error}} destroyed (net: {{#if isGrowth}}{{#warning netChange color=../colorEnabled}}{{/warning}}{{else}}{{#if isShrink}}{{#success netChange color=../colorEnabled}}{{/success}}{{else}}{{netChange}}{{/if}}{{/if}})
{{#if createdSample}}
    Created: {{#each createdSample}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}{{#if hasMoreCreated}} +{{moreCreatedCount}} more{{/if}}
{{/if}}
{{/each}}
{{/if}}

{{!-- Findings --}}
{{#if hasFindings}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}
{{#bold "Findings:" color=colorEnabled}}{{/bold}}
{{#bold "───────────────────────────────────────────────────────────────────────────────" color=colorEnabled}}{{/bold}}

{{#each findings}}
{{#severityColor severity color=../colorEnabled}}[{{severity}}]{{/severityColor}} {{message}}
{{/each}}
{{/if}}

{{#unless hasIssues}}
{{#success "✓ Thread count stable, no churn issues detected" color=colorEnabled}}{{/success}}
{{/unless}}

{{#bold "═══════════════════════════════════════════════════════════════════════════════" color=colorEnabled}}{{/bold}}